=head1 NAME

Mail::Server::IMAP4::Fetch - message info for IMAP protocol speed-up

=head1 SYNOPSIS

 my $imap = Mail::Server::IMAP4::Fetch->new($msg);
 print $imap->fetchBody(1);   # for FETCH BODYSTRUCTURE
 print $imap->fetchBody;      # for FETCH BODY
 print $imap->fetchEnvelope;  # for FETCH ENVELOPE
 print $imap->fetchSize;

=head1 DESCRIPTION

Create a new object hierarchy, which contains information to capture
the most important details about the message.  The object can be used
to speed-up IMAP-server implementations, as L<Mail::Box::Netzwert>.

The object used here is a simplified representation of a
L<Mail::Box::Message|Mail::Box::Message> object.  It does not maintain headers and does
not refer to the folder.  It only works with messages stored in a file.
Therefore, this object can be frozen by L<Storable> if you want to.

=head1 METHODS

=head2 Constructors

Mail::Server::IMAP4::Fetch-E<gt>B<new>(MESSAGE|PART, OPTIONS)

=over 4

 Option      --Default
 md5checksums  0

. md5checksums => BOOLEAN

=back

=head2 Attributes

$obj-E<gt>B<bodyLocation>

=over 4

=back

$obj-E<gt>B<headLocation>

=over 4

=back

$obj-E<gt>B<partLocation>

=over 4

=back

=head2 IMAP Commands

$obj-E<gt>B<fetchBody>(EXTENDED)

=over 4

Returns one string, representing the message's structure as defined by
the IMAP protocol.  The boolean argument indicates whether you like to
have the EXTENDED information, as the imap command 'FETCH BODYSTRUCTURE'
defines or the limited information of 'FETCH BODY'.

=back

$obj-E<gt>B<fetchEnvelope>

=over 4

Returns a string representation of some header information.

=back

$obj-E<gt>B<fetchSize>

=over 4

Returns the size of the message body.

=back

$obj-E<gt>B<part>([PARTNR])

=over 4

The partnummer is a list of dot-separated positive integers, numbering
(nested) parts in multi-part message bodies.  By default, the info of
the main message is returned.

example: 

 my $partinfo = $msg->info->part('1.2.1');
 print $msg->info->part('3.3')->fetchBody;

=back

$obj-E<gt>B<printStructure>([FILEHANDLE|undef, [NUMBER]])

=over 4

Print the structure of the fetch data to the specified FILEHANDLE or the
selected filehandle.  When explicitly C<undef> is specified as handle,
then the output will be returned as string.  
Only a limited set of the information is displayed.

example: 

 my $imap = ...;
 $imap->printStructure(\*OUTPUT);
 $imap->printStructure;
 my $struct = $imap->printStructure(undef);

=back

=head2 Internals

=head1 DETAILS

See

=over 4

=item RFC2060: "Internet Message Access Protocol IMAP4v1" section 7.4.2

=item RFC2045: "MIME Part One: Format of Internet Message Bodies".

=back

=head1 SEE ALSO

This module is part of Mail-Box distribution version 2.094,
built on April 06, 2010. Website: F<http://perl.overmeer.net/mailbox/>

=head1 LICENSE

Copyrights 2001-2010 by Mark Overmeer. For other contributors see ChangeLog.

This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.
See F<http://www.perl.com/perl/misc/Artistic.html>

